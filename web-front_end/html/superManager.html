<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>超级管理员</title>
    <link href="../css/bootstrap.css" rel="stylesheet">
    <link href="../css/app.css" rel="stylesheet">
    <script type="text/javascript" src="../js/jquery-3.3.1.js"></script>
    <script type="text/javascript" src="../js/jquery.cookie.js"></script>
    <script src="../js/paging_model.js"></script>
    <link rel="stylesheet" href="../css/app.css">
    <link type="text/css" rel="stylesheet" href="../css/xcConfirm.css">
    <script type="text/javascript" src="../js/xcConfirm.js"></script>
    <script type="text/javascript"src="../js/common.js"></script>
</head>
<body>
<nav class="navbar navbar-default" id="nav" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header" style="width: 60px; height: 60px;margin-left: 60px;" >
            <a href="index.html" id="index_id"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
        </div>
        <div class="nav_btn">
            <button type="button" class="btn btn-primary btn-block" onclick="find_btn()">发现</button>
        </div>
        <div class="nav_btn">
            <button type="button" class="btn btn-primary btn-block" onclick="fllow_btn()">关注</button>
        </div>
        <div class="input-group search_input">
            <span class="input-group-btn">
                <button class="btn btn-default" type="button">搜索</button>
            </span>
            <input type="text" class="form-control" placeholder="输入要查找文章">
        </div>
        <ul class="nav navbar-nav navbar-right nav_ul" id="user_info">
        </ul>
    </div>
</nav>
<div class="" style="text-align: center;height: 60px;font-size: 24px">
    超级管理员
</div>
<div class="col-sm-4 manager_table">
    <div>
        <ul  class="list-group">
            <li class="list-group-item" id="change_item_1">获取所有用户</li>
            <li class="list-group-item" id="change_item_2">获取所有文章</li>
        </ul>
    </div>
</div>
<div class="col-sm-8">
    <div id="order1" style="display: none">
        <div class="user_article_body">
            <div class="user_article_head">
                <a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
            </div>
            <div class="user_article_name">
                <h3>用户名</h3>
            </div>
            <div class="user_article_btn">
                <button type="button" class="btn btn-primary btn-default" onclick="d_btn()">删除</button>
                <button type="button" class="btn btn-primary btn-default" onclick="r_btn()">修改为管理员</button>
            </div>
        </div>
        <div class="user_article_body">
            <div class="user_article_head">
                <a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
            </div>
            <div class="user_article_name">
                <h3>用户名</h3>
            </div>
            <div class="user_article_btn">
                <button type="button" class="btn btn-primary btn-default" onclick="d_btn()">删除</button>
                <button type="button" class="btn btn-primary btn-default" onclick="r_btn()">修改为管理员</button>
            </div>
        </div>
        <div class="user_article_body">
            <div class="user_article_head">
                <a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
            </div>
            <div class="user_article_name">
                <h3>用户名</h3>
            </div>
            <div class="user_article_btn">
                <button type="button" class="btn btn-primary btn-default" onclick="d_btn()">删除</button>
                <button type="button" class="btn btn-primary btn-default" onclick="r_btn()">修改为管理员</button>
            </div>
        </div>
        <div class="user_article_body">
            <div class="user_article_head">
                <a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
            </div>
            <div class="user_article_name">
                <h3>用户名</h3>
            </div>
            <div class="user_article_btn">
                <button type="button" class="btn btn-primary btn-default" onclick="d_btn()">删除</button>
                <button type="button" class="btn btn-primary btn-default" onclick="r_btn()">修改为管理员</button>
            </div>
        </div>
        <div class="user_article_body">
            <div class="user_article_head">
                <a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
            </div>
            <div class="user_article_name">
                <h3>用户名</h3>
            </div>
            <div class="user_article_btn">
                <button type="button" class="btn btn-primary btn-default" onclick="d_btn()">删除</button>
                <button type="button" class="btn btn-primary btn-default" onclick="r_btn()">修改为管理员</button>
            </div>
        </div>
        <div class="user_article_body">
            <div class="user_article_head">
                <a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
            </div>
            <div class="user_article_name">
                <h3>用户名</h3>
            </div>
            <div class="user_article_btn">
                <button type="button" class="btn btn-primary btn-default" onclick="d_btn()">删除</button>
                <button type="button" class="btn btn-primary btn-default" onclick="r_btn()">修改为管理员</button>
            </div>
        </div>
        <div class="user_article_body">
            <div class="user_article_head">
                <a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
            </div>
            <div class="user_article_name">
                <h3>用户名</h3>
            </div>
            <div class="user_article_btn">
                <button type="button" class="btn btn-primary btn-default" onclick="d_btn()">删除</button>
                <button type="button" class="btn btn-primary btn-default" onclick="r_btn()">修改为管理员</button>
            </div>
        </div>
        <div class="user_article_body">
            <div class="user_article_head">
                <a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
            </div>
            <div class="user_article_name">
                <h3>用户名</h3>
            </div>
            <div class="user_article_btn">
                <button type="button" class="btn btn-primary btn-default" onclick="d_btn()">删除</button>
                <button type="button" class="btn btn-primary btn-default" onclick="r_btn()">修改为管理员</button>
            </div>
        </div>
        <div id="user_all">

        </div>
        <div id="page_list"></div>
        <div class="pager-list"></div>
    </div>
    <div id="order2" style="display: none">
        <div class="user_article_body">
            <div class="user_article_head">
                <a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
            </div>
            <div class="user_article_name">
                <h3>文章名</h3>
            </div>
            <div class="user_article_btn">
                <button type="button" class="btn btn-primary btn-default" onclick="d_btn()">删除</button>
                <button type="button" class="btn btn-primary btn-default" onclick="f_btn()">允许发布</button>
            </div>
        </div>
        <div class="user_article_body">
            <div class="user_article_head">
                <a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
            </div>
            <div class="user_article_name">
                <h3>文章名</h3>
            </div>
            <div class="user_article_btn">
                <button type="button" class="btn btn-primary btn-default" onclick="d_btn()">删除</button>
                <button type="button" class="btn btn-primary btn-default" onclick="f_btn()">允许发布</button>
            </div>
        </div>
        <div class="user_article_body">
            <div class="user_article_head">
                <a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
            </div>
            <div class="user_article_name">
                <h3>文章名</h3>
            </div>
            <div class="user_article_btn">
                <button type="button" class="btn btn-primary btn-default" onclick="d_btn()">删除</button>
                <button type="button" class="btn btn-primary btn-default" onclick="f_btn()">允许发布</button>
            </div>
        </div>
        <div class="user_article_body">
            <div class="user_article_head">
                <a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
            </div>
            <div class="user_article_name">
                <h3>文章名</h3>
            </div>
            <div class="user_article_btn">
                <button type="button" class="btn btn-primary btn-default" onclick="d_btn()">删除</button>
                <button type="button" class="btn btn-primary btn-default" onclick="f_btn()">允许发布</button>
            </div>
        </div>
        <div class="user_article_body">
            <div class="user_article_head">
                <a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
            </div>
            <div class="user_article_name">
                <h3>文章名</h3>
            </div>
            <div class="user_article_btn">
                <button type="button" class="btn btn-primary btn-default" onclick="d_btn()">删除</button>
                <button type="button" class="btn btn-primary btn-default" onclick="f_btn()">允许发布</button>
            </div>
        </div>
        <div class="user_article_body">
            <div class="user_article_head">
                <a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>
            </div>
            <div class="user_article_name">
                <h3>文章名</h3>
            </div>
            <div class="user_article_btn">
                <button type="button" class="btn btn-primary btn-default" onclick="d_btn()">删除</button>
                <button type="button" class="btn btn-primary btn-default" onclick="f_btn()">允许发布</button>
            </div>
        </div>

        <div class="pager-list"></div>
    </div>
</div>
</body>
<script>
    let wand=$.cookie('this_token');
    let user_identity=$.cookie('this_id');
    let str1='';
    let str2='';
    let str3='';
    $(document).ready(function(){
        $.ajax({
            url: 'http://localhost:8080/user/getUserInfo',//相对应的esb接口地址
            type: 'post',
            data: {"identity": user_identity,"token":wand},//向服务器（接口）传递的参数
            success: function (data) {//服务器（接口）返回来的数据

                let obj = eval('(' + data + ')');
                if(obj.code==100){
                    str2='UserInfo.html?this_identity='+user_identity;
                    str1+='<a href="'+str2+'">'
                    str1+='<div class="navbar-header" style="width: 60px; height: 60px;float: left">'
                    str1+='<img src="'+obj.data.headPortrait+'" style="height: 100%;width: 100%" class="img-circle">'
                    str1+='</div>'
                    str1+='<div style="width: 60px; height: 60px;float: left;line-height: 60px">'
                    str1+= '<span>'+user_identity+'</span>'
                    str1+= '</div>'
                    str1+= '</a>'
                    str1+='<div class="nav_btn">'
                    str1+='<button type="button" class="btn btn-primary btn-block" id="wr_btn" onclick="my_btn()">我的</button></div>'
                    str1+='<div class="nav_btn">'
                    str1+='<button type="button" class="btn btn-primary btn-block" id="wr_btn" onclick="btn()">写文章</button></div>'
                    $("#user_info").html(str1);
                }else{
                    str3+='<li><a href="login.html"><span class="glyphicon glyphicon-user"></span> 注册</a></li>'
                    str3+='<li><a href="login.html"><span class="glyphicon glyphicon-log-in"></span> 登录</a></li>'
                    $("#user_info").html(str3);
                }
            }
        })
    });
    $(document).ready(function () {
        let temp = "none";

        $("#change_item_1").click(function () {
            openMatter(1);
            let total;
            $.ajax({

                url: ' http://localhost:8080/user/getUserLikeArticles',//相对应的esb接口地址

                type: 'post',

                data: {"pageNo":1,"token":wand},//向服务器（接口）传递的参数

                success: function (data) {//服务器（接口）返回来的数据
                    if (data.code == 100) {//如果返回来的信息说明提交的信息为正确的
                        total=data.data.pageSize;
                        let datas = data.data.result;
                        let str ='';
                        let str1 ='';
                        for(let i=0; i<datas.length;i++){
                            alert(datas);
                            for(let j=0;j<datas[i].length;j++){
                                alert(datas[i][j].email);
                            }
                            // str += '<div class="user_article_body">'
                            // str += '<div class="user_article_head">'
                            // str += '<a href="#"><img src="../img/logo.jpg" style="height: 100%;width: 100%" class="img-circle"></a>'
                            // str += '</div>'
                            // str += '<div class="user_article_name">'
                            // str += '<h3>'+ datas[i].length+'</h3>'
                            // str += '</div>'
                            // str += '<div class="user_article_btn">'
                            // str += '<button type="button" class="btn btn-primary btn-default">删除</button>'
                            // str += '<button type="button" class="btn btn-primary btn-default">修改为管理员</button>'
                            // str += '</div>'
                            // str += '</div>'

                        }
                        str1+='<div class="pager-list"></div>'
                        $('#user_all').html(str);
                        $('#pagelist').html(str1);
                        $('div.pager-list').pageList({
                            prevText: '前一页',
                            nextText: '下一页',
                            recordText: '共{0}页，{1}条记录',
                            totalCount: total,
                            goInputType: 'text',
                            //showGoLink: true,
                            showPageRange: 5,
                            renderPerCall: true,
                            clickCallback: function (currentPage) {
                                let str = next_page(currentPage);
                            }

                        });
                    }
                    else {//如果返回来的信息说明提供的信息为错误的


                    }
                }

            });
        });
        $("#change_item_2").click(function () {
            openMatter(2);

        });
        function openMatter(obj) {
            for (let i = 1; i < 3; i++) {
                if (i == obj) {
                    temp = "block";
                } else {
                    temp = "none";
                }
                document.getElementById("order" + i).style.display = temp;

            }
        }
    });
    $().ready(function () {
        $('div.pager-list').pageList({
            prevText: '前一页',
            nextText: '下一页',
            recordText: '共{0}页，{1}条记录',
            totalCount: 200,
            goInputType: 'text',
            //showGoLink: true,
            showPageRange: 5,
            renderPerCall: true,
            clickCallback: function (currentPage) {
                console.info("currentPage:" + currentPage);
            }
        });
    });
    function d_btn() {
        let txt=  "删除成功";
        window.wxc.xcConfirm(txt, window.wxc.xcConfirm.typeEnum.success);

    }
    function r_btn() {
        let txt=  "修改成功";
        window.wxc.xcConfirm(txt, window.wxc.xcConfirm.typeEnum.success);

    }
    function f_btn() {
        let txt=  "发布成功";
        window.wxc.xcConfirm(txt, window.wxc.xcConfirm.typeEnum.success);

    }
</script>
</html>