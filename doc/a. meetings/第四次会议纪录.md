# 会议纪录


## 第二次会议 2018年11月11日

### 一.会议概要
| 姓名  | 本周成果    | 下周计划任务              | 负责部分 |
|-----|---------|---------------------|-------|
| 王进  |登录注册逻辑 和我的页面部分UI | 用户信息的修改与查看           |   【Android端开发】、原型设计、 用户信息修改部分、 用户关注部分、通知部分(评论通知、点赞通知)、用户复合信息(文章数、字数、粉丝数、关注的人数)   |
| 周志远 | 创建SSH项目  |      其他       |    后台管理员部分：管理员管理、用户管理、文章管理    |
| 罗冲  | 前端编辑器 | 用户登录注册后台(2周)        |      |
| 陈益岗 | 文章相关的后台处理 | 其他  |  文章部分：发布、修改、删除、查询(首页推荐、用户关注的文章、文章搜索)、收藏、点赞、评论     |

### 二.讨论内容

#### 1、确定了文章上传和图片上传的处理方法

##### 1.1 数据储存：
采用两张表：文章表和图片表。图片表有4个基本字段：id,relative path,state,relative article id.

  图片保存在项目的images路径下（暂定）

##### 1.2 数据处理：

  **①图片初步处理**：独立上传和独立删除

  **独立上传**：用户发表文章的时候选择好自己的图片后->客户端程序对选择好的图片进行上传->服务端程序得到图片后就把图片写到服务器的文件系统(得到相对路径)->服务端程序再new一个图片对象(生成图片id,赋值好相对路径，状态标记为未引用，文章id标记为空)->把图片对象插入到图片表当中->把图片对象转换为JSON字符串返回给客户端

  **独立删除**：服务端需要一个deamon来对没有被引用的图片进行定时清理

 **②文章数据处理/图片进一步处理**
  客户端得到上一步的图片的JSON字符串后，拿出图片的真实URL之后，就把这个URL插入到HTML文本当中，此时HTML就可以正常显示图片了。

  如果此时用户放弃编辑文章：当前我们是不做自动保存草稿的，然后如果没有上传图片，此时客户端就直接放弃编辑文章。如果用户有上传图片，此时客户端也是直接放弃编辑文章，临时图片的话就交给服务端的Deamon进程(线程)来自动回收即可。

  最后用户把文章编辑好了之后，点击发布，客户端把文章的数据传递给服务端。客户端传递的数据有两部分<br>
  part1:html格式的纯文本文章。
  part2:把所有图片的JSON字符串收集起来，变成JSON数组。

  服务端收到客户端的传递的文章数据后，new一个文章对象，把客户端发来的文章part1的数据保存到文章对象中。然后insert到数据库。得到文章对象的id。<br>
  然后在把part2的数据解析为图片对象数组。把这个数组里面的所有对象的state标记为已经引用。relative article id 设置为当前文章对象的id。然后再根据图片对象的数组更新图片表。


  




#### 2、统一Action的命名空间  model/action